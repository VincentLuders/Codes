/*
Formalizr v. 1.0.0.3
Copyright (C) 2014-2019 www.dennisbabkin.com. All Rights Reserved.

This is an Open Source project. It is minified for efficiency.
To download readable source code, go to:
 https://github.com/dennisbabkin/Formalizr
*/

gl={gSettings:{nCollectFlgs:268435455,nCollectMax:128,bCollectData:true,bIncogCollectData:true},collectAllFormData:function(){var h=[];var l=1;try{var a=this.gSettings.nCollectFlgs;if(a&252){var q=document.getElementsByTagName("input");if(q){var p=0;for(var g=0;g<q.length;g++,p++){var b=q[g];var n=this.isObjAcceptable(b,a);if(n){if(gl.isElmtCollectable(b)){var f=b.value;if(!this.isWhitespaceEmptyString(f)){if(h.length>=this.gSettings.nCollectMax){l=0;break}h.push({id:b.id,nm:b.name,tp:n,si:p,val:f})}}}}}}if(a&1){var c=document.getElementsByTagName("textarea");if(c){var m=65536;for(var g=0;g<c.length;g++,m++){var b=c[g];var n=this.isObjAcceptable(b,a);if(n){if(gl.isElmtCollectable(b)){var f=b.value;if(!this.isWhitespaceEmptyString(f)){if(h.length>=this.gSettings.nCollectMax){l=0;break}h.push({id:b.id,nm:b.name,tp:n,si:m,val:f})}}}}}}if(a&2){var o=document.getElementsByTagName("*");if(o){var d;var k=131072;for(var g=0;g<o.length;g++,k++){d=o[g];if(d.isContentEditable){if(gl.isElmtCollectable(d)){var f=d.innerText;if(!this.isWhitespaceEmptyString(f)){if(h.length>=this.gSettings.nCollectMax){l=0;break}h.push({id:d.id,nm:d.name,tp:">ce",si:k,val:f})}}}}}}}catch(j){l=-1;gl.logExceptionReport(100,j)}return{dt:h,rs:l}},isAutocompleteOff:function(a){var b=a.autocomplete;if(b){if(b.toLowerCase()=="off"){return true}}if(a.form){b=a.form.autocomplete;if(b){if(b.toLowerCase()=="off"){return true}}}return false},isElmtCollectable:function(a){if(a.__frmlzrColl92){return true}if(!a.__frmlzrSet93){a.addEventListener("input",gl._OnElmtInput,true);a.__frmlzrSet93=true}return false},_OnElmtInput:function(a){if(a.target.__frmlzrColl92){return}a.target.__frmlzrColl92=true;a.target.removeEventListener("input",gl._OnElmtInput,true);chrome.runtime.sendMessage({action:"reqUpdate01"})},onDocumentChange:function(d){var a=gl.gSettings.nCollectFlgs;for(var f=0;f<d.length;f++){var b=d[f];var k=b.target;if(gl.isObjAcceptable(k,a)){gl.isElmtCollectable(k)}else{if(k.contentEditable&&k.contentEditable!="inherit"&&k.contentEditable!="false"){gl.isElmtCollectable(k)}}if(a&252){var l=k.getElementsByTagName("input");if(l){for(var h=0;h<l.length;h++){var c=l[h];if(gl.isObjAcceptable(c,a)){gl.isElmtCollectable(c)}}}}if(a&1){var e=k.getElementsByTagName("textarea");if(e){for(var h=0;h<e.length;h++){var c=e[h];if(gl.isObjAcceptable(c,a)){gl.isElmtCollectable(c)}}}}if(a&2){var j=k.getElementsByTagName("*");if(j){var g;for(var h=0;h<j.length;h++){g=j[h];if(g.isContentEditable){gl.isElmtCollectable(g)}}}}}},isObjAcceptable:function(d,b){var a=null;if(d&&(!(b&65536)||d.id||d.name)){if(d.readOnly!==true){if(d.nodeName=="INPUT"){var c=d.type;if(c){c=c.toLowerCase();if(((b&4)&&c=="text")||((b&8)&&c=="email")||((b&16)&&c=="number")||((b&32)&&c=="search")||((b&64)&&c=="tel")||((b&128)&&c=="url")){if((b&131072)||!gl.isAutocompleteOff(d)){a=c}}}}else{if((b&1)&&d.nodeName=="TEXTAREA"){if((b&131072)||!gl.isAutocompleteOff(d)){a="textarea"}}}}}return a},isWhitespaceEmptyString:function(a){return a?!(/\S/.test(a)):(a===""||a===null||a===undefined)},fillAllFormData:function(t){var v=false;try{var d=window!=window.top;var q;if(d){q=gl.get_iframeIndex()+">"+document.URL;q=q?q.toString().toLowerCase():""}else{q="."}for(var k in t){var c=k?k.toString().toLowerCase():"";if(c==q){var g=t[k];for(var r=0;r<g.length;r++){var n=false;var l=g[r];var j=document.getElementsByTagName("input");if(j){var b=0;for(var o=0;o<j.length;o++,b++){var m=j[o];if(b==l.si&&this.isSameStrNoCase(m.id,l.id)&&this.isSameStrNoCase(m.name,l.nm)&&this.isSameStrNoCase(m.type,l.tp)){n=true;m.value=l.v;break}}}if(n){continue}if(l.tp=="textarea"){var h=document.getElementsByTagName("textarea");if(h){var u=65536;for(var o=0;o<h.length;o++,u++){var m=h[o];if(u==l.si&&this.isSameStrNoCase(m.id,l.id)&&this.isSameStrNoCase(m.name,l.nm)){n=true;m.value=l.v;break}}}}if(n){continue}if(l.tp==">ce"){var f=document.getElementsByTagName("*");if(f){var s=131072;for(var o=0;o<f.length;o++,s++){var m=f[o];if(m.isContentEditable){if(s==l.si&&this.isSameStrNoCase(m.id,l.id)&&this.isSameStrNoCase(m.name,l.nm)){m.innerText=l.v;break}}}}}}}}v=true}catch(p){v=false;gl.logExceptionReport(119,p)}return v},isSameStrNoCase:function(b,a){if(b){if(a){if(b.substring){if(a.substring){return b.toLowerCase()==a.toLowerCase()}else{return b.toLowerCase()==a.toString().toLowerCase()}}else{if(a.substring){return b.toString().toLowerCase()==a.toLowerCase()}else{return b.toString().toLowerCase()==a.toString().toLowerCase()}}}}else{if(!a){if((b===""||b===null||b===undefined)&&(a===""||a===null||a===undefined)){return true}}}return false},collectAllFormDataAndNotify:function(f){var h={};try{var g=chrome.extension.inIncognitoContext?true:false;var c;var k=window.self!==window.top;if(!k){try{c=window.top.document.URL}catch(i){c=document.referrer}}else{c=document.referrer}var d=gl.gSettings.bCollectData;if(d&&!gl.gSettings.bIncogCollectData&&g){d=false}var j;if(d){j=gl.collectAllFormData()}else{j={rs:1,dt:[]}}var b=window!=window.top;var a="";if(b){a=gl.get_iframeIndex()}h={action:"update01",topURL:c,pageURL:document.URL,pageTitle:document.title,favIconURL:gl.getFavIconUrl(true),bIFrame:b,ifrmI:a,incg:g,colRes:j.rs,formData:j.dt};if(f!==false){chrome.runtime.sendMessage(h)}}catch(i){gl.logExceptionReport(103,i)}return h},getFavIconUrl:function(g){var e="";var c=document.getElementsByTagName("link");for(var f=0;f<c.length;f++){var d=c[f].getAttribute("rel");if(d!=null){d=d.toLowerCase();if(d=="icon"||d=="shortcut icon"||d=="icon shortcut"){e=c[f].getAttribute("href");if(g===true){var b=document.createElement("a");b.href=e;e=b.href}break}}}return e},onPageLoaded:function(a){gl.collectAllFormDataAndNotify()},onBeforeSubmit:function(a){gl.collectAllFormDataAndNotify()},onBeforePageUnload:function(a){gl.collectAllFormDataAndNotify()},onClickOnPage:function(a){gl.collectAllFormDataAndNotify()},onKeyPressOnPage:function(a){if(a.keyCode==13){gl.collectAllFormDataAndNotify()}},addRemPageEventHandlers:function(d){try{var a=window.document.getElementsByTagName("form");if(a){for(var b=0;b<a.length;b++){if(!d){a[b].addEventListener("submit",gl.onBeforeSubmit,true)}else{a[b].removeEventListener("submit",gl.onBeforeSubmit,true)}}}if(!d){window.addEventListener("beforeunload",gl.onBeforePageUnload,true)}else{window.removeEventListener("beforeunload",gl.onBeforePageUnload,true)}gl._addBodyEventHandlers(0,d)}catch(c){gl.logExceptionReport(d?111:166,c)}},_addBodyEventHandlers:function(b,d){if(b>=2000){var c="[151] Quit trying to "+(!d?"install":"remove")+" document.body handlers. Iteration="+b;gl.logDebuggerMsg(c);console.error(c);return}var a=window.document.body;if(a){if(!d){a.addEventListener("click",gl.onClickOnPage,true)}else{a.removeEventListener("click",gl.onClickOnPage,true)}if(!d){a.addEventListener("keydown",gl.onKeyPressOnPage,true)}else{a.removeEventListener("keydown",gl.onKeyPressOnPage,true)}return}window.setTimeout(function(){gl._addBodyEventHandlers(b+1,d)},1)},updateSettings:function(a){gl.gSettings={nCollectFlgs:a.nCollectFlgs,nCollectMax:a.nCollectMax,bCollectData:a.bCollectData,bIncogCollectData:a.bIncogCollectData}},onMessageProc:function(e,d,a){if(e.action=="update02"){var c=e.retRes;gl.updateSettings(e.sttgs);var f=gl.collectAllFormDataAndNotify(c?false:true);a({res:535,resData:(c?f:null)})}else{if(e.action=="fill01"){var b=gl.fillAllFormData(e.data);a({res:b})}else{if(a){a(null)}}}},logDebuggerMsg:function(a){console.error("[159] cpyID="+window.nCS_counter+", CS ERR: "+a)},logExceptionReport:function(c,b){var a="ERROR("+c+"): ";if(b.stack){a+=b.stack}else{a+=b.message}gl.logDebuggerMsg(a)},_remElementInputListener:function(a){if(a){a.removeEventListener("input",gl._OnElmtInput,true);delete a.__frmlzrColl92;delete a.__frmlzrSet93}},get_iframeIndex:function(){return gl._iframeIndex_recurs(window)},_iframeIndex_recurs:function(e){var f="";var d=window.top;if(e==d){return f}var b=e.parent;if(b!=d){f=this._iframeIndex_recurs(b)+"_"}var a=b.frames;for(var c=0;c<a.length;c++){if(a[c]==e){return f+c}}return f+"?"},updateFromBgnd:function(a){chrome.runtime.sendMessage({action:"update00"},function(c){var b=chrome.runtime.lastError;if(
/*!rspErr &&*/
c&&c.res===99){gl.updateSettings(c.dta)}else{if(a>100){}else{window.setTimeout(function(d){gl.updateFromBgnd(++d)},10,a)}}})},removeAllElementInputListeners:function(){var b=document.getElementsByTagName("input");if(b){for(var a=0;a<b.length;a++){gl._remElementInputListener(b[a])}}var e=document.getElementsByTagName("textarea");if(e){for(var a=0;a<e.length;a++){gl._remElementInputListener(e[a])}}var d=document.getElementsByTagName("*");if(d){var c;for(var a=0;a<d.length;a++){c=d[a];if(c.isContentEditable){gl._remElementInputListener(c)}}}},allDestructor:function(){window.nCS_counter=window.nCS_counter?window.nCS_counter+1:1;gl.addRemPageEventHandlers(true);if(window.__ftmlzr_mutObs){window.__ftmlzr_mutObs.disconnect();delete window.__ftmlzr_mutObs}gl.removeAllElementInputListeners();document.removeEventListener("destructor_evt_"+chrome.runtime.id,gl.allDestructor)}};var destructionEvent="destructor_evt_"+chrome.runtime.id;document.dispatchEvent(new CustomEvent(destructionEvent));document.addEventListener(destructionEvent,gl.allDestructor);gl.updateFromBgnd(0);gl.addRemPageEventHandlers();var mutObs=new MutationObserver(gl.onDocumentChange);mutObs.observe(document,{childList:true,subtree:true});window.__ftmlzr_mutObs=mutObs;gl.collectAllFormDataAndNotify();chrome.runtime.onMessage.addListener(gl.onMessageProc);